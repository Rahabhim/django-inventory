angular.module("f3.movable",["ui.bootstrap"]).directive("moveHook",["$window","$compile","$document","$position",function(e,t,n,r){return{restrict:"A",scope:!0,link:function(t,n,i){if(!n.attr("id"))throw Error("moveHook cannot work without 'id' attribute on element");t.xoffset=parseInt(i.moveHookXoffset||0),t.yoffset=parseInt(i.moveHookYoffset||0);var s,o,u=i.ngClickReceive;t._move_close_hook=!1,n.css({position:"absolute",left:0,top:0});var a=r.offset(n);if("leftOf"in i)s=function(){var e=angular.element("#"+i.leftOf);if(!e)throw Error("Object not found at left-of: #"+i.leftOf);var n=r.offset(e);return{left:n.left+n.width+t.xoffset-a.left,top:n.top+t.yoffset-a.top}},o="horizontal";else{if(!("under"in i))throw Error("Invalid or unset position for moveHookId");s=function(){var e=angular.element("#"+i.under);if(!e)throw Error("Object not found at under: #"+i.under);var n=r.offset(e);return{left:n.left+t.xoffset-a.left,top:n.top+n.height+t.yoffset-a.top}},o="vertical"}t._alignTo=function(e,i,f){var l=s(),c=r.offset(e);o=="horizontal"?l.top=c.top+t.yoffset-a.top:o=="vertical"&&(l.left=c.left+t.xoffset-a.left),u&&(t[u]=i),n.css(l),n.show(),t._move_close_hook=f},n.css(s()),n.hide(),t.close=function(){n.hide(),this._move_close_hook&&this._move_close_hook()}}}}]).directive("ngClickAlign",["$window","$compile","$document","$position","$parse",function(e,t,n,r,i){return{restrict:"A",scope:!0,link:function(t,n,r){var s="#"+r.ngClickAlign,o=r.ngClickSend,u=!1;if("ngMoveClose"in r){var a=i(r.ngMoveClose);u=function(){a(t)}}n.bind("click",function(e){t.$apply(function(){var e=angular.element(s),r=undefined;o&&(r=t.$eval(o)),e.scope()._alignTo(n,r,u)})})}}}]);