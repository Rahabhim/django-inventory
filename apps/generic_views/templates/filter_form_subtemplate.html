{% load i18n %}
{% load styling %}
{{ form.media|safe }}
{% add_classes_to_form form %}

    <div class="content filter-form">
    <h2 class="title"> {% include "calculate_form_title.html" %} </h2>
    <div class="inner">

    <form method="{{ submit_method|default:'post' }}" action="" class="form">
        {% for hidden_field in hidden_fields %}
           {{ hidden_field.as_hidden }}
        {% endfor %}
{% if form.non_field_errors %}
    <div class="flash">
        {% for value in form.non_field_errors %}
            <div class="message error">
                <p>{{ value }}</p>
            </div>
        {% endfor %}
  </div>
{% endif %}

    <table class="table filter_form">
        <thead><tr>
                {% for field in form.visible_fields %}
                <th> {{ field.label_tag }} </th>
                {% endfor %}
                <th>&nbsp;</th>
        </tr>
        </thead>

        <tbody> <tr>
    {% for field in form.visible_fields %}
            <td title="{% if field.errors %}{% for error in field.errors %}{{ error }}{% if not forloop.last %} | {% endif %}{% endfor %}{% else %}{{ field.help_text }}{% endif %}">
            {% if field.errors %}<div class="flash"><div class="error">{% endif %}
              {{ field }}
            {% if field.errors %}</div></div>{% endif %}
            </td>
    {% endfor %}

                <td class="group navform wat-cf">
                <button class="button" type="submit">
                        {% trans 'Search' %}
                </button>
                </td>
        </tr>
        </table>
    </form>
</div></div>
